#LyX 2.0 created this file. For more info see http://www.lyx.org/
\lyxformat 413
\begin_document
\begin_header
\textclass book
\begin_preamble
% -----------------------------------------  
% Autogenerated LaTeX file from XML DocBook  
% -----------------------------------------  
%%<params>
%%</params>

\usepackage{ifthen}\newboolean{DBKIsBook}
\setboolean{DBKIsBook}{true}
\IfFileExists{ifxetex.sty}{%
    \usepackage{ifxetex}%
  }{%
    \newif\ifxetex
    \xetexfalse
  }
  \ifxetex
\usepackage{fontspec}\usepackage{xltxtra}\setmainfont{DejaVu Serif}
\setsansfont{DejaVu Sans}
\setmonofont{DejaVu Sans Mono}
\else
\fi
\usepackage{fancybox}\usepackage[hyperlink]{docbook}\renewcommand{\DBKreleaseinfo}{}


\title{Questions and Answers}
\author{}

% ------------------
% Collaborators
% ------------------
\renewcommand{\DBKindexation}{
\begin{DBKindtable}
\DBKinditem{\writtenby}{}
\end{DBKindtable}
}
\makeindex
\makeglossary
\end_preamble
\use_default_options false
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding latin1
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100

\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing single
\use_hyperref true
\pdf_bookmarks true
\pdf_bookmarksnumbered false
\pdf_bookmarksopen false
\pdf_bookmarksopenlevel 1
\pdf_breaklinks false
\pdf_pdfborder false
\pdf_colorlinks false
\pdf_backref section
\pdf_pdfusetitle true
\pdf_quoted_options "%"
\papersize default
\use_geometry false
\use_amsmath 1
\use_esint 1
\use_mhchem 1
\use_mathdots 1
\cite_engine basic
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\use_refstyle 0
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 5
\tocdepth 5
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Standard

\end_layout

\begin_layout Chapter
Questions and Answers
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "Questions-and-Answers"

\end_inset








\end_layout

\begin_layout Section
How can I do nonblocking (aka "unbuffered" and "raw") IO?
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "How-can-I-do-nonblocking--aka--unbuffered--and--raw---IO-"

\end_inset







There's some code for manipulating TTY modes in "ccl:library;pty.lisp".
\end_layout

\begin_layout Standard

[firstnumber=1,] ? (require "PTY")
\end_layout

\begin_layout Standard
? (ccl::disable-tty-local-modes 0 #$ICANON) T 


\end_layout

\begin_layout Standard
will turn off "input canonicalization" on file descriptor 0, which is at
 least part of what you need to do here.
 This disables the #$ICANON mode, which tells the OS not to do any line-

buffering or line-

editing.
 Of course, this only has any effect in situations where the OS ever does
 that, which means when stdin is a TTY or PTY.
\end_layout

\begin_layout Standard
If the #$ICANON mode is disabled, you can do things like:
\end_layout

\begin_layout Standard

[firstnumber=1,] ? (progn (read-char) (read-char)) a #

 


\end_layout

\begin_layout Standard
(where the first READ-

CHAR consumes the newline, which isn't really necessary to make the reader
 happy anymore.) So, you can do:
\end_layout

\begin_layout Standard

[firstnumber=1,] ? (read-char) #

 


\end_layout

\begin_layout Standard
(where there's a space after the close-

paren) without having to type a newline.
\end_layout

\begin_layout Section
I'm using the graphics demos.
 Why doesn't the menubar change?
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "I-m-using-the-graphics-demos--Why-doesn-t-the-menubar-change-"

\end_inset







When you interact with text-

only Clozure CL, you're either in Terminal or in Emacs, running Clozure
 CL as a subprocess.
 When you load Cocoa or the graphical environment, the subprocess does some
 tricky things that turn it into a full-

fledged Application, as far as the OS is concerned.
\end_layout

\begin_layout Standard
So, it gets its own icon in the dock, and its own menubar, and so on.
 It can be confusing, because standard input and output will still be connected
 to Terminal or Emacs, so you can still type commands to Clozure CL from
 there.
 To see the menubar you loaded, or the windows you opened, just click on
 the Clozure CL icon in the dock.
\end_layout

\begin_layout Section
I'm using Slime and Cocoa.
 Why doesn't *standard-

output* seem to work? 
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "I-m-using-Slime-and-Cocoa--Why-doesn-t--standard-output--seem-to-work-"

\end_inset







This comes up if you're using the Slime interface to run Clozure CL under
 Emacs, and you are doing Cocoa programming which involves printing to *standard
-

output*.
 It seems as though the output goes nowhere; no error is reported, but it
 doesn't appear in the *slime-

repl* buffer.
\end_layout

\begin_layout Standard
For the most part, this is only relevant when you are trying to insert debug
 code into your event handlers.
 The SLIME listener runs in a thread where the standard stream variables
 (like 
\family typewriter
*STANDARD-OUTPUT* and
\family default
 and 
\family typewriter
*TERMINAL-IO*
\family default
 are bound to the stream used to communicate with Emacs; the Cocoa event
 thread has its own bindings of these standard stream variables, and output
 to these streams goes to the *inferior-

lisp* buffer instead.
 Look for it there.
\end_layout

\end_body
\end_document
